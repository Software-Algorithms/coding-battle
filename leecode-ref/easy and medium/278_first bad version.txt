/* The isBadVersion API is defined in the parent class VersionControl.
      boolean isBadVersion(int version); */

/*
public class Solution extends VersionControl {
    public int firstBadVersion(int n) {
        int a = 1, b = n;
        while(a<=b) {
            if(a==b) return a;
            int mid = a + (b - a) / 2; // (a+b)/2 would cause integer overflow
            boolean curr = isBadVersion(mid);
            if(mid==a && !curr) return mid+1;
            else if(curr) b = mid;
            else a = mid;
        }
        return n;
    }
}
*/


public class Solution extends VersionControl {
    public int firstBadVersion(int n) {
        int a = 1, b = n;
        while(a<b) {
            int mid = a + (b - a) / 2;  // (a+b)/2 would cause integer overflow
            boolean curr = isBadVersion(mid);
            if(mid==1 && curr) return 1;
            boolean next = isBadVersion(mid+1);
            if(!curr && next) return mid+1;
            else if(!curr && !next) a = mid + 1;
            else b = mid;
        }
        return n;
    }
}
